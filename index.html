<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CivicConnect - Crowdsourced Civic Issue Reporting</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .hero-bg {
    background-image:'back.jpg';
    background-size: cover;
    background-position: center; 
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .btn-primary {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .form-input:focus {
      border-color: #3B82F6;
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
    }
    #map {
      height: 400px;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 1;
    }
    .footer-btn {
      display: inline-block;
      padding: 12px 30px;
      background: #3b82f6;
      color: white;
      border-radius: 50px;
      font-weight: bold;
      text-decoration: none;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(59,130,246,0.7); }
      50% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(59,130,246,0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(59,130,246,0); }
    }
    .issue-marker {
      filter: hue-rotate(0deg);
      transition: filter 0.3s ease;
    }
    .issue-marker:hover {
      filter: hue-rotate(220deg);
    }
    .custom-popup .leaflet-popup-content-wrapper {
      border-radius: 8px;
      padding: 1px;
    }
    .custom-popup .leaflet-popup-content {
      margin: 12px;
      font-size: 14px;
    }
  </style>
  <style>
  /* Animation for stat boxes */
  @keyframes statsFadeIn {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-stats {
    animation: statsFadeIn 0.6s ease-out forwards;
  }
  .animate-delay-100 { animation-delay: 0.3s; }
  .animate-delay-200 { animation-delay: 0.4s; }
  .animate-delay-300 { animation-delay: 0.5s; }
  .animate-delay-400 { animation-delay: 0.6s; }
  /* Enhance hover effect with bounce */
  .transform.transition:hover {
    transform: scale(1.05) translateY(-4px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

   /* Glow and Zoom animation for Report an Issue button */
  @keyframes glowZoom {
    0% {
      transform: scale(1);
      box-shadow: 0 0 10px 0 rgba(59, 130, 246, 0.7), 0 0 20px 0 rgba(147, 51, 234, 0.5);
    }
    50% {
      transform: scale(1.15);
      box-shadow: 0 0 20px 10px rgba(59, 130, 246, 0.4), 0 0 30px 15px rgba(147, 51, 234, 0.3);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 10px 0 rgba(59, 130, 246, 0.7), 0 0 20px 0 rgba(147, 51, 234, 0.5);
    }
  }
  .animate-glow-zoom {
    animation: glowZoom 2s infinite ease-in-out;
  }
  /* Ensure hover effect works with animation */
  .btn-primary:hover {
    transform: scale(1.1) translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3), 0 0 15px rgba(59, 130, 246, 0.5);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
</style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- Header -->
  <header class="bg-white shadow-lg sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
      <h1 class="text-3xl font-bold text-blue-700 flex items-center">üèõÔ∏è CivicConnect</h1>
      <nav class="hidden md:flex space-x-6">
        <a href="#features" class="text-blue-600 hover:text-blue-800 font-medium transition">Features</a>
        <a href="#map" class="text-blue-600 hover:text-blue-800 font-medium transition">Live Map</a>
        <a href="#stats" class="text-blue-600 hover:text-blue-800 font-medium transition">Impact</a>
        <a href="login.html" class="bg-blue-600 text-white py-2 px-4 rounded-full hover:bg-blue-700 transition btn-primary">Login</a>
        <a href="register.html" class="bg-blue-600 text-white py-2 px-4 rounded-full hover:bg-blue-700 transition btn-primary">Sign Up</a>
        </nav>
      <button class="md:hidden text-blue-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </header>

    <!-- Hero Section --> 
    
<section class="hero-bg bg-[url('back.jpg')] bg-cover bg-center text-white py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center rounded-lg">
    <h2 class="text-4xl md:text-5xl font-bold mb-6 animate-fade-in">Report Issues, Build Community</h2>
    <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">
      Join your neighbors in reporting and tracking local civic issues. Together, we can make our community better.
    </p>
    <a href="#report" class="inline-block bg-white text-blue-700 font-semibold py-3 px-8 rounded-full btn-primary shadow-lg animate-glow-zoom">Report an Issue</a>
  </div>
</section>


  <!-- Stats -->
  <section id="stats" class="bg-blue-600 text-white py-16 text-center">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <h3 class="text-3xl font-bold mb-12">Community Impact</h3>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
      <div class="bg-white text-blue-900 rounded-xl shadow-lg p-6 transform transition hover:scale-105 animate-stats animate-delay-100">
        <div class="text-4xl font-bold mb-2">1,234</div>
        <p class="text-sm font-medium">Reports Submitted</p>
      </div>
      <div class="bg-white text-blue-900 rounded-xl shadow-lg p-6 transform transition hover:scale-105 animate-stats animate-delay-200">
        <div class="text-4xl font-bold mb-2">987</div>
        <p class="text-sm font-medium">Issues Resolved</p>
      </div>
      <div class="bg-white text-blue-900 rounded-xl shadow-lg p-6 transform transition hover:scale-105 animate-stats animate-delay-300">
        <div class="text-4xl font-bold mb-2">456</div>
        <p class="text-sm font-medium">Active Users</p>
      </div>
      <div class="bg-white text-blue-900 rounded-xl shadow-lg p-6 transform transition hover:scale-105 animate-stats animate-delay-400">
        <div class="text-4xl font-bold mb-2">2.3 days</div>
        <p class="text-sm font-medium">Avg Response Time</p>
      </div>
    </div>
  </div>
</section>

  <!-- Report Form -->
  <section id="report" class="py-16 bg-white">
    <div class="max-w-lg mx-auto px-4">
      <h3 class="text-3xl font-semibold text-gray-800 mb-8 text-center">Submit Your Report</h3>
      <form id="issueForm" class="space-y-6 bg-gray-50 p-6 rounded-xl shadow-md">
        <div>
          <label for="title" class="block text-sm font-medium text-gray-700">Issue Title *</label>
          <input type="text" id="title" class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg" placeholder="e.g. Pothole on Main Street" required>
        </div>
        <div>
          <label for="category" class="block text-sm font-medium text-gray-700">Issue Type *</label>
          <select id="category" class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg bg-white" required>
            <option value="">Select an issue type</option>
            <option>Pothole</option>
            <option>Broken Streetlight</option>
            <option>Overflowing Trash</option>
            <option>Water Break</option>
            <option>Graffiti</option>
            <option>Other</option>
          </select>
        </div>
        <div>
          <label for="description" class="block text-sm font-medium text-gray-700">Description *</label>
          <textarea id="description" rows="4" maxlength="200" class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg" placeholder="Describe the issue in detail (max 200 characters)" required></textarea>
          <p class="text-xs text-gray-500 mt-1"><span id="charCount">0</span>/200 characters</p>
        </div>
        <div>
          <label for="photo" class="block text-sm font-medium text-gray-700">Upload Photo</label>
          <input type="file" id="photo" accept="image/*" class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg bg-white">
          <div id="photo-preview" class="mt-4 hidden">
            <img src="" alt="Preview" class="max-w-full h-auto rounded-lg shadow-sm max-h-40">
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label for="latitude" class="block text-sm font-medium text-gray-700">Latitude</label>
            <input type="text" id="latitude" readonly class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg bg-gray-100">
          </div>
          <div>
            <label for="longitude" class="block text-sm font-medium text-gray-700">Longitude</label>
            <input type="text" id="longitude" readonly class="form-input mt-1 block w-full p-3 border border-gray-300 rounded-lg bg-gray-100">
          </div>
        </div>
        <div class="flex space-x-4">
          <button type="button" id="getLocationBtn" class="flex-1 bg-blue-600 text-white py-3 px-4 rounded-lg btn-primary">Get My Location</button>
          <button type="button" id="resetLocationBtn" class="flex-1 bg-gray-500 text-white py-3 px-4 rounded-lg btn-primary">Reset Location</button>
        </div>
        <div>
          <button type="submit" class="w-full bg-green-600 text-white py-3 px-4 rounded-lg btn-primary">Submit Report</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">How It Works</h2>
      <div class="grid md:grid-cols-4 gap-6 text-center">
        <div class="bg-white p-6 rounded-xl shadow"><div class="text-4xl mb-3">üìç</div><h3 class="font-semibold">Location Based</h3><p>Detect your GPS location for accuracy.</p></div>
        <div class="bg-white p-6 rounded-xl shadow"><div class="text-4xl mb-3">üì∑</div><h3 class="font-semibold">Photo Evidence</h3><p>Upload images of issues you encounter.</p></div>
        <div class="bg-white p-6 rounded-xl shadow"><div class="text-4xl mb-3">‚è∞</div><h3 class="font-semibold">Real-Time Tracking</h3><p>Track your reports from start to finish.</p></div>
        <div class="bg-white p-6 rounded-xl shadow"><div class="text-4xl mb-3">üë•</div><h3 class="font-semibold">Community Driven</h3><p>Work together to improve your city.</p></div>
      </div>
    </div>
  </section>

  <!-- Map -->
  <section id="map-section" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4">
      <h3 class="text-3xl font-semibold text-gray-800 mb-8 text-center">Live Issue Map</h3>
      <div class="mb-4 flex justify-center">
        <div class="flex space-x-2">
          <span class="flex items-center"><div class="w-4 h-4 bg-red-500 rounded-full mr-1"></div> High Priority</span>
          <span class="flex items-center"><div class="w-4 h-4 bg-yellow-500 rounded-full mr-1"></div> Medium Priority</span>
          <span class="flex items-center"><div class="w-4 h-4 bg-green-500 rounded-full mr-1"></div> Low Priority</span>
        </div>
      </div>
      <div id="map"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-10 text-center">
    <h3 class="text-2xl font-bold mb-4">Ready to Make a Difference?</h3>
    <p class="mb-6">Join thousands of citizens using CivicConnect to improve their communities.</p>
    <a href="#report" class="footer-btn">üöÄ Report Now</a>
    <p class="mt-6 text-sm">&copy; 2023 CivicConnect. All rights reserved.</p>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Initialize variables
    let map, marker, userLocationObtained = false;

    // Initialize Map
    function initMap() {
      map = L.map('map').setView([20.2961, 85.8245], 13); // Default: Bhubaneswar

      // Add OpenStreetMap Layer
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19,
      }).addTo(map);

      // Add initial marker
      marker = L.marker([20.2961, 85.8245], {
        draggable: true,
        icon: L.icon({
          iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',
          iconSize: [25, 41],
          iconAnchor: [12, 41],
          popupAnchor: [1, -34]
        })
      }).addTo(map);

      // Add sample issue markers (in a real app, these would come from a database)
      addSampleIssues();
      
      // Update form when marker is dragged
      marker.on('dragend', function() {
        const position = marker.getLatLng();
        updateFormCoordinates(position.lat, position.lng);
      });
      
      // Update marker when map is clicked
      map.on('click', function(e) {
        marker.setLatLng(e.latlng);
        updateFormCoordinates(e.latlng.lat, e.latlng.lng);
      });
    }

    // Add sample issues to the map
    function addSampleIssues() {
      const issues = [
        { lat: 20.2961, lng: 85.8245, title: "Pothole on Main Road", type: "Pothole", priority: "high" },
        { lat: 20.2920, lng: 85.8200, title: "Broken Streetlight", type: "Broken Streetlight", priority: "medium" },
        { lat: 20.3000, lng: 85.8300, title: "Overflowing Trash Bin", type: "Overflowing Trash", priority: "high" },
        { lat: 20.2900, lng: 85.8150, title: "Water Pipeline Leak", type: "Water Break", priority: "medium" },
        { lat: 20.2950, lng: 85.8100, title: "Graffiti on Wall", type: "Graffiti", priority: "low" }
      ];
      
      issues.forEach(issue => {
        let markerColor;
        if (issue.priority === "high") markerColor = "red";
        else if (issue.priority === "medium") markerColor = "orange";
        else markerColor = "green";
        
        const issueIcon = L.divIcon({
          className: 'issue-marker',
          html: `<div style="background-color: ${markerColor}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.5);"></div>`,
          iconSize: [24, 24],
          iconAnchor: [12, 12]
        });
        
        const issueMarker = L.marker([issue.lat, issue.lng], { icon: issueIcon }).addTo(map);
        issueMarker.bindPopup(`
          <div class="custom-popup">
            <h4 class="font-bold">${issue.title}</h4>
            <p>Type: ${issue.type}</p>
            <p>Priority: <span style="color: ${markerColor}; font-weight: bold">${issue.priority}</span></p>
            <p>Status: <span style="color: blue">Reported</span></p>
          </div>
        `);
      });
    }

    // Update form coordinates
    function updateFormCoordinates(lat, lng) {
      document.getElementById('latitude').value = lat.toFixed(6);
      document.getElementById('longitude').value = lng.toFixed(6);
      userLocationObtained = true;
    }

    // Get user's location
    function getLocation() {
      if (navigator.geolocation) {
        document.getElementById('getLocationBtn').textContent = "Locating...";
        navigator.geolocation.getCurrentPosition(
          function(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            
            // Update map view
            map.setView([lat, lng], 15);
            
            // Update marker position
            marker.setLatLng([lat, lng]);
            
            // Update form fields
            updateFormCoordinates(lat, lng);
            
            document.getElementById('getLocationBtn').textContent = "Get My Location";
            
            // Show success message
            showNotification("Location obtained successfully!", "success");
          },
          function(error) {
            document.getElementById('getLocationBtn').textContent = "Get My Location";
            let errorMsg;
            switch(error.code) {
              case error.PERMISSION_DENIED:
                errorMsg = "Location access denied. Please enable location permissions in your browser settings.";
                break;
              case error.POSITION_UNAVAILABLE:
                errorMsg = "Location information is unavailable.";
                break;
              case error.TIMEOUT:
                errorMsg = "The request to get your location timed out.";
                break;
              default:
                errorMsg = "An unknown error occurred.";
                break;
            }
            showNotification(errorMsg, "error");
          },
          { timeout: 10000 }
        );
      } else {
        showNotification("Geolocation is not supported by this browser.", "error");
      }
    }

    // Reset location
    function resetLocation() {
      marker.setLatLng([20.2961, 85.8245]);
      map.setView([20.2961, 85.8245], 13);
      document.getElementById('latitude').value = "";
      document.getElementById('longitude').value = "";
      userLocationObtained = false;
    }

    // Show notification
    function showNotification(message, type) {
      // Remove any existing notifications
      const existingNotification = document.querySelector('.fixed-notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      const notification = document.createElement('div');
      notification.className = `fixed-notification fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 ${
        type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
      }`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        notification.remove();
      }, 5000);
    }

    // Character count for description
    function setupCharacterCount() {
      const description = document.getElementById('description');
      const charCount = document.getElementById('charCount');
      
      description.addEventListener('input', () => {
        charCount.textContent = description.value.length;
      });
    }

    // Photo Preview
    function setupPhotoPreview() {
      const photoInput = document.getElementById('photo');
      const photoPreview = document.getElementById('photo-preview');
      
      photoInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          // Check if file is an image
          if (!file.type.match('image.*')) {
            showNotification("Please select an image file.", "error");
            photoInput.value = "";
            return;
          }
          
          // Check file size (max 5MB)
          if (file.size > 5 * 1024 * 1024) {
            showNotification("Image must be less than 5MB.", "error");
            photoInput.value = "";
            return;
          }
          
          const reader = new FileReader();
          reader.onload = (e) => {
            photoPreview.querySelector('img').src = e.target.result;
            photoPreview.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });
    }

    // Form submission
    function setupFormSubmission() {
      const form = document.getElementById('issueForm');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Basic validation
        const title = document.getElementById('title').value;
        const category = document.getElementById('category').value;
        const description = document.getElementById('description').value;
        const lat = document.getElementById('latitude').value;
        const lng = document.getElementById('longitude').value;
        
        if (!title || !category || !description) {
          showNotification("Please fill in all required fields.", "error");
          return;
        }
        
        if (!userLocationObtained) {
          showNotification("Please obtain your location or set it on the map.", "error");
          return;
        }
        
        // In a real application, you would send this data to a server
        // For this demo, we'll just show a success message
        showNotification("Issue reported successfully! Thank you for your contribution.", "success");
        
        // Reset form
        form.reset();
        document.getElementById('photo-preview').classList.add('hidden');
        document.getElementById('charCount').textContent = "0";
        
        // For demo purposes, add a new marker for the reported issue
        const newIssue = {
          lat: parseFloat(lat),
          lng: parseFloat(lng),
          title: title,
          type: category,
          priority: "medium" // Default priority
        };
        
        addNewIssueMarker(newIssue);
      });
    }
    
    // Add a new issue marker to the map
    function addNewIssueMarker(issue) {
      const issueIcon = L.divIcon({
        className: 'issue-marker',
        html: '<div style="background-color: blue; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.5);"></div>',
        iconSize: [24, 24],
        iconAnchor: [12, 12]
      });
      
      const issueMarker = L.marker([issue.lat, issue.lng], { icon: issueIcon }).addTo(map);
      issueMarker.bindPopup(`
        <div class="custom-popup">
          <h4 class="font-bold">${issue.title}</h4>
          <p>Type: ${issue.type}</p>
          <p>Priority: <span style="color: blue; font-weight: bold">New</span></p>
          <p>Status: <span style="color: blue">Just Reported</span></p>
        </div>
      `).openPopup();
    }

    // Initialize everything when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      initMap();
      setupCharacterCount();
      setupPhotoPreview();
      setupFormSubmission();
      
      // Set up button event listeners
      document.getElementById('getLocationBtn').addEventListener('click', getLocation);
      document.getElementById('resetLocationBtn').addEventListener('click', resetLocation);
      
      // Smooth scrolling for navigation links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });
  </script>
</body>
</html>